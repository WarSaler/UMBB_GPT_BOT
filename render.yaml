services:
  - type: web
    name: umbb-gpt-bot
    env: python
    plan: free
    buildCommand: |
      echo "üîç –ù–∞—á–∞–ª–æ —Å–±–æ—Ä–∫–∏ UMBB GPT Bot..."
      python3 --version
      pip3 --version
      echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
      pip3 install --upgrade pip
      pip3 install -r requirements_minimal.txt
      echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:"
      pip3 list | grep -E "(telegram|loguru|dotenv)"
      echo "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ telegram:"
      python3 -c "import telegram; print('‚úÖ telegram –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ'); print(f'–í–µ—Ä—Å–∏—è: {telegram.__version__}')"
      echo "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ telegram.ext:"
      python3 -c "from telegram.ext import Application; print('‚úÖ telegram.ext –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ')"
      echo "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞:"
      python3 -c "exec(open('bot.py').read().split('if __name__')[0]); print('‚úÖ bot.py –∑–∞–≥—Ä—É–∂–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫')"
      echo "üéâ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
    startCommand: python3 bot.py
    envVars:
      - key: PYTHON_VERSION
        value: "3.11"
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: PORT
        value: "10000"